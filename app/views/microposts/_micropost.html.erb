<% provide(:url_action, user_comments_path(current_user, micropost_id: micropost.id)) %>
<% provide(:class_typecmt, "typecmt #{micropost.id}") %>
<% provide(:method_controll, "post") %>

<li id="<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <% if current_user?(micropost.user) %>
      <%= link_to "delete", micropost, method: :delete,
                                       data: { confirm: "You sure?" } %>
    <% end %>
  </span>
  <span
    class="content"><%= micropost.content %>
    <%= image_tag micropost.picture.url if micropost.picture? %>
  </span>

  <hr>

  <div id="cmtpost<%= micropost.id %>">
    <% micropost.comment.last(5).reverse.each do |comment|%>
      <%= render comment %>
    <% end %>
  </div>

  <%= link_to "Show comment", micropost_comments_path(micropost), remote: true, class: "btn-showcmt#{micropost.id}" %>

  <%= render "comments/comment_form" %>
</li>
